import { decode } from 'blurhash';

const BLURHASH_SCALE_FACTOR = 4;
function decode2url(hash, width, height) {
  const blurWidth = width * BLURHASH_SCALE_FACTOR;
  const blurHeight = height * BLURHASH_SCALE_FACTOR;
  const pixels = decode(hash, blurWidth, blurHeight);
  const canvas = document.createElement("canvas");
  canvas.width = blurWidth;
  canvas.height = blurHeight;
  const ctx = canvas.getContext("2d");
  if (!ctx) {
    return void 0;
  }
  const imageData = ctx.createImageData(blurWidth, blurHeight);
  imageData.data.set(pixels);
  ctx.putImageData(imageData, 0, 0);
  return canvas.toDataURL("image/png");
}

export { decode2url };
